@model IEnumerable<FridgeManagementSystem.Models.Employee>

@{
    Layout = "_Layout";
    ViewData["Title"] = "Manage Employees";
}

<h2 class="mb-4">Manage Employees</h2>

<p>
    <a asp-action="CreateEmployee" asp-controller="Admin" asp-area="Administrator" class="btn btn-primary mb-3">
        <i class="bi bi-person-plus-fill"></i> Add New Employee
    </a>
</p>

<div class="mb-3">
    <input type="text" id="employeeSearch" class="form-control" placeholder="Search employees...">
</div>

<div class="row" id="employeeContainer">
    @foreach (var emp in Model)
    {
        <div class="col-md-4 mb-4 employee-card-wrapper">
            <div class="card h-100 shadow-sm employee-card">
                <div class="card-header d-flex justify-content-between align-items-center bg-gradient rounded-top text-white">
                    <div>
                        <i class="bi bi-person-circle me-2"></i> @emp.FullName
                    </div>
                    <span class="badge bg-secondary">@emp.Role</span>
                </div>
                <div class="card-body">
                    <p><i class="bi bi-envelope-fill me-1"></i> @emp.ContactInfo</p>
                    <p><i class="bi bi-telephone-fill me-1"></i> @emp.PhoneNumber</p>
                    <p>
                        <strong>Status:</strong>
                        @if (emp.Status == "Active")
                        {
                            <span class="badge bg-success"><i class="bi bi-check-circle-fill me-1"></i>Active</span>
                        }
                        else
                        {
                            <span class="badge bg-danger"><i class="bi bi-x-circle-fill me-1"></i>Inactive</span>
                        }
                    </p>
                </div>
                <div class="card-footer d-flex justify-content-between">
                    <a asp-action="EditEmployee" asp-route-id="@emp.EmployeeID" asp-controller="Admin" asp-area="Administrator" class="btn btn-sm btn-outline-primary rounded-pill">
                        <i class="bi bi-pencil-fill"></i> Edit
                    </a>
                    <a asp-action="DetailsEmployee" asp-route-id="@emp.EmployeeID" asp-controller="Admin" asp-area="Administrator" class="btn btn-sm btn-outline-info rounded-pill">
                        <i class="bi bi-eye-fill"></i> View
                    </a>
                    <form asp-action="DeleteEmployee" asp-route-id="@emp.EmployeeID" asp-controller="Admin" asp-area="Administrator" method="post" class="d-inline">
                        <button type="submit" class="btn btn-sm btn-outline-danger rounded-pill" onclick="return confirm('Are you sure you want to delete this employee?')">
                            <i class="bi bi-trash-fill"></i> Delete
                        </button>
                    </form>
                </div>
            </div>
        </div>
    }
</div>

@section Styles {
    <style>
        .employee-card {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }

            .employee-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
            }

        .card-header.bg-gradient {
            background: linear-gradient(90deg, #4e73df, #1cc88a);
        }
    </style>
}

@section Scripts {
    <script>
        console.log("Manage Employees page loaded!");

        // Search/filter employees
        const searchInput = document.getElementById('employeeSearch');
        const employeeContainer = document.getElementById('employeeContainer');

        searchInput.addEventListener('input', () => {
            const query = searchInput.value.toLowerCase();
            document.querySelectorAll('.employee-card-wrapper').forEach(cardWrapper => {
                const name = cardWrapper.querySelector('.card-header div').innerText.toLowerCase();
                cardWrapper.style.display = name.includes(query) ? 'block' : 'none';
            });
        });
    </script>
}


